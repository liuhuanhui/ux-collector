{"version":3,"sources":["webpack:///webpack/bootstrap 71abfc823f0e800dcb7f","webpack:///./index.js","webpack:///./src/main.js","webpack:///./src/collectors/page_tracing.js","webpack:///./src/utils.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA,8B;;;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,wBAAwB;AAC3C;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;ACnFA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,G;;;;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G","file":"ux-collector.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 71abfc823f0e800dcb7f","/**\r\n * Created by laiyq@txtws.com on 2016/11/3.\r\n */\r\nvar UXCollector = require('./src/main');\r\nwindow.UXCollector = UXCollector;\r\nmodule.exports = UXCollector;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./index.js\n// module id = 0\n// module chunks = 0","/**\r\n * Created by laiyq@txtws.com on 2016/11/17.\r\n */\r\nvar UXCollector = {};\r\n//所有收集器\r\nvar _collectorsHub = {};\r\n//所有收集器名称\r\nvar _collectorsAll = [];\r\n\r\n//服务地址\r\nvar _server = null;\r\n//启用哪些收集器\r\nvar _collectors = [];\r\n//发送前调用\r\nvar _beforeSend = null;\r\n\r\n/**\r\n * 工具集\r\n */\r\nUXCollector.utils = require('./utils');\r\n\r\n/**\r\n * 配置\r\n * @param config\r\n * @returns {UXCollector}\r\n */\r\nUXCollector.setConfig = function (config) {\r\n    _server = config['server'];\r\n    _collectors = config['collectors'] || [];\r\n    _beforeSend = config['beforeSend'] || null;\r\n    return this;\r\n};\r\n\r\n/**\r\n * 收集器启动\r\n */\r\nUXCollector.start = function () {\r\n    if (!_collectors.length) {\r\n        _collectors = _collectorsAll;\r\n    }\r\n    //执行收集器\r\n    for (var i = 0; i < _collectors.length; i++) {\r\n        var collector = _collectors[i];\r\n        if (_collectorsHub[collector] instanceof Function) {\r\n            _collectorsHub[collector](function (data) {\r\n                _send(collector, data);\r\n            })\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * 收集器\r\n * @param name\r\n * @param collectorFn\r\n */\r\nUXCollector.addCollector = function (name, collectorFn) {\r\n    if (!_collectorsHub[name]) {\r\n        _collectorsAll.push(name);\r\n    }\r\n    _collectorsHub[name] = collectorFn;\r\n};\r\n\r\n/**\r\n * 发送器\r\n * @param collector\r\n * @param data\r\n * @private\r\n */\r\nfunction _send(collector, data) {\r\n    //发送拦截\r\n    if (_beforeSend instanceof Function) {\r\n        if (_beforeSend(collector, data) === false) {\r\n            return;\r\n        }\r\n    }\r\n    //发送\r\n    (new Image()).src = UXCollector.utils.getUrl(_server, data);\r\n}\r\n\r\n/*----- 注册收集器 ----*/\r\n//页面追踪\r\nrequire('./collectors/page_tracing')(UXCollector);\r\nmodule.exports = UXCollector;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/main.js\n// module id = 1\n// module chunks = 0","/**\r\n * Created by laiyq@txtws.com on 2016/11/17.\r\n */\r\nmodule.exports = function (UXCollector) {\r\n    UXCollector.addCollector(\"pageTracing\", function (send) {\r\n        window.onload=function () {\r\n            \r\n        }\r\n        var data = {\r\n            //收集器名称\r\n            \"collector\":\"pageTracing\",\r\n            //当前页面地址：通过请求的referrer获取\r\n            // \"url\":\"\",\r\n            //页面来源地址\r\n            \"referrer\":\"http://example.com/exmple-uri-1.html\",\r\n            //页面加载时间,单位毫秒\r\n            \"pageLoadTime\":200\r\n            //用户标识，若需要请在beforeSend中添加，规范命名：userId\r\n        };\r\n        send(data);\r\n    })\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/collectors/page_tracing.js\n// module id = 2\n// module chunks = 0","/**\r\n * Created by laiyq@txtws.com on 2016/11/17.\r\n */\r\nmodule.exports = {\r\n    //获取完整的url\r\n    getUrl: function (url, data) {\r\n        data = data || {};\r\n        var p = '';\r\n        for (var i in data) {\r\n            p += i + \"=\" + encodeURIComponent(data[i]) + \"&\";\r\n        }\r\n        if (p.length > 0) {\r\n            p = (url.indexOf('?') > 0 ? \"&\" : \"?\") + p.substr(0, p.length - 1);\r\n        }\r\n        return url + p;\r\n    }\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/utils.js\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}